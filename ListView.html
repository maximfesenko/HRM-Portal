<html>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<style>
		#listViewTableId {
			border: 1px solid black;
			margin: 0% 35%;
		}

		#listViewTableId tr td {
			text-align: center;
		}
	</style>

	<body>
		Free text
		<button onclick="func(); return false;">get Ajax</button>

		<table id="listViewTableId" border="1">
		</table>
	</body>

	<script>

		function func() {
			var parts = location.search.substring(1).split('&');
			var parameters = {};

			for (var i = 0; i < parts.length; i++) {
				var param = parts[i].split('=');
				parameters[param[0]] = param[1];
			}
			console.log("parameters=",parameters);

			$.get("/ajaxListView?name=" + parameters.name, function( data ) {
				console.log(data);
				var headers = [];
				for (var i = 0; i < data.fields.length; i++) {
					headers.push('<th>' + data.fields[i] + '</th>');
				}

				var rows = [];
				for (var i = 0; i < data.items.length; i++) {
					rows.push('<tr>');
					$.each(data.fields, function(index, value) {
						rows.push('<td>' + data.items[i][value] + '</td>');
					});
					rows.push('</tr>');
				}

				$("#listViewTableId").html($([
						'<tr>',
							headers,
						'</tr>',
						rows
					].join(""))
				);
			})
			.fail(function(data) {
				console.log(JSON.parse(data.responseText).message);
			});
		}
	</script>
</html>