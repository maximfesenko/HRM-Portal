<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

		<link rel="stylesheet" href="/css/start.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	</head>

	<script>
		$(function() {
			$('#login-form-link').click(function(e) {
				$("#login-form").delay(100).fadeIn(100);
				$("#register-form").fadeOut(100);
				$('#register-form-link').removeClass('active');
				$(this).addClass('active');
				e.preventDefault();
			});
			$('#register-form-link').click(function(e) {
				$("#register-form").delay(100).fadeIn(100);
				$("#login-form").fadeOut(100);
				$('#login-form-link').removeClass('active');
				$(this).addClass('active');
				e.preventDefault();
			});

			$("#login-submit").click(function() {
				checkError($("#username"));
				checkError($("#password"));

				var parameters = {username: $("#username").val(), password: $("#password").val()};

				if ($("#username").val() && $("#password").val()) {
					$.post("/ajaxLogin", parameters, function(data) {
						window.location.href = "/home";
					})
					.fail(function(data) {
						$("#username").css("border", "2px solid red");
						$("#login-error-id").addClass("alert alert-warning");
						$("#login-error-id").text(data.responseText);
					});
				}
			});

			$("#register-submit").click(function() {
				checkError($("#firstname"));
				checkError($("#lastname"));
				checkError($("#reg_username"));
				checkError($("#email"));
				checkError($("#reg_password"));
				checkError($("#confirm-password"));
				checkError($("#question"));
				checkError($("#answer"));
				checkError($("#hint"));

				var isRequiredFilled = (
					$("#firstname").val() && $("#lastname").val() && $("#reg_username").val() && $("#email").val() &&
					$("#reg_password").val() && $("#confirm-password").val() && $("#question").val() && $("#answer").val() &&
					$("#hint").val()
				);
				var parameters = {firstname: $("#firstname").val(), lastname: $("#lastname").val(),
					username: $("#reg_username").val(), email: $("#email").val(), password: $("#reg_password").val(),
					confirm: $("#confirm-password").val(), question: $("#question").val(), answer: $("#answer").val(),
					hint: $("#hint").val()};

				if (isRequiredFilled) {
					$.post("/ajaxRegister", parameters, function(data) {

						window.location.href = "/home";
					})
					.fail(function(data) {
						$("#login-error-id").addClass("alert alert-warning");
						$("#login-error-id").text(data.responseText);
					});
				}
			});
		});
	</script>

	<body>
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-md-offset-3">
					<div class="panel panel-login">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-6">
									<a href="#" class="active" id="login-form-link">Login</a>
								</div>
								<div class="col-xs-6">
									<a href="#" id="register-form-link">Register</a>
								</div>
							</div>
							<hr>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-lg-12">
									<div id="login-error-id" role="alert"></div>
									<form id="login-form" role="form" style="display: block;">
										<div class="form-group">
											<input type="text" name="username" id="username" tabindex="1" class="form-control"
												placeholder="Username" value="" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="password" name="password" id="password" tabindex="2" class="form-control"
												placeholder="Password" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group text-center">
											<input type="checkbox" tabindex="3" class="" name="remember" id="remember">
											<label for="remember"> Remember Me</label>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6 col-sm-offset-3">
													<input type="button" name="login-submit" id="login-submit" tabindex="4" class="form-control btn btn-login" value="Log In">
												</div>
											</div>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-lg-12">
													<div class="text-center">
														<a href="#" tabindex="5" class="forgot-password">Forgot Password?</a>
													</div>
												</div>
											</div>
										</div>
									</form>
									<form id="register-form" role="form" style="display: none;">
										<div class="form-group">
											<input type="text" name="firstname" id="firstname" tabindex="6" class="form-control"
												placeholder="First Name" value="" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="text" name="lastname" id="lastname" tabindex="7" class="form-control"
												placeholder="Last Name" value="" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="text" name="reg_username" id="reg_username" tabindex="8" class="form-control"
												placeholder="Username" value="" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="email" name="email" id="email" tabindex="9" class="form-control"
												placeholder="Email Address" value="" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="password" name="reg_password" id="reg_password" tabindex="10" class="form-control"
												placeholder="Password" data-toggle="tooltip" data-placement="top"
												title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="password" name="confirm-password" id="confirm-password" tabindex="11"
												class="form-control" placeholder="Confirm Password" data-toggle="tooltip"
												data-placement="top" title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="text" name="question" id="question" tabindex="12" class="form-control"
												placeholder="Question" value="" data-toggle="tooltip"
												data-placement="top" title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="text" name="answer" id="answer" tabindex="13" class="form-control"
												placeholder="Answer" value="" data-toggle="tooltip"
												data-placement="top" title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<input type="text" name="hint" id="hint" tabindex="14" class="form-control"
												placeholder="Hint" value="" data-toggle="tooltip"
												data-placement="top" title="Couldn't be empty.">
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6 col-sm-offset-3">
													<input type="button" name="register-submit" id="register-submit" tabindex="15" class="form-control btn btn-register" value="Register Now">
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

	<script>
		function checkError(tag) {
			if ( ! $(tag).val()) {
				$(tag).tooltip("show");
				$(tag).css("border", "2px solid red");
			}
			else {
				$(tag).css("border", "1px solid #ddd");
			}
		}
	</script>
</html>